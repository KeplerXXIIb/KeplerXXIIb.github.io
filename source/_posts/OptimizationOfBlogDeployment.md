---
title: è®°ä¸€æ¬¡å¯¹ä¸ªäººåšå®¢éƒ¨ç½²(ä¸»é¢˜+ç´ æéƒ¨ç½²ï¼‰çš„ä¼˜åŒ–Optimization Of Blog Deployment
date: 2024-06-11
cover_image: /imgs/20240615000.png
categories: tech-blog
tags:
  - CS
---

## ç®€è¿°
æˆ‘çš„ä¸ªäººåšå®¢å·²ç»æ­å»ºå¥½äº†ï¼Œè¯¦æƒ…è§[æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡]ï¼ˆå†™äº†æ­åšå®¢çš„æ–¹æ³•åŠè¿‡ç¨‹å˜¿å˜¿ï¼‰.
æ•´ä½“åšå®¢çš„ä¸»é¢˜æˆ‘å‘ç°äº†ç›¸å½“é…·ç‚«çš„[hexo-theme-cupertino]ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå°å°DIYäº†ä¸€ä¸‹ã€‚
åœ¨å†™åšæ–‡çš„è¿‡ç¨‹ä¸­æˆ‘å‘ç°ä¸ªé—®é¢˜ï¼šå›¾ç‰‡ç´ æçš„ç®¡ç†æœ‰ç‚¹éº»çƒ¦ã€‚
æˆ‘çš„åŸå§‹æ–¹æ¡ˆï¼šç´ æå•ç‹¬æ”¾ä¸€ä¸ªåº“ï¼Œç„¶åå»å¼•ç”¨ã€‚è€ƒè™‘åˆ°åªæ˜¯ä¸ªäººåšå®¢ï¼Œä¸”å›¾ç‰‡é‡ä¸å¤§ï¼Œæ‰€ä»¥ç›´æ¥é€‰äº†githubæ¥æ‰˜ç®¡ã€‚ç„¶è€Œåœ¨å®æ“è¿‡ç¨‹ä¸­æˆ‘å‘ç°ï¼Œæ¯æ¬¡å†™æ–‡ç« ï¼Œä¸Šä¼ å›¾ç‰‡å¾ˆéº»çƒ¦ï¼Œè¦å•ç‹¬å»ç®¡ç†ã€‚äºæ˜¯ä¹ï¼Œæ‰“ç®—ä¼˜åŒ–ä¸€ä¸‹ã€‚
å¦‚æœæ¢æˆå…¶ä»–çš„å›¾åº“ï¼Œé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œå› ä¸ºä¾ç„¶è¦å»ç»´æŠ¤ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©å°†å›¾ç‰‡æ”¾æœ¬åœ°ã€‚
å¶ç„¶é—´å‘ç°æˆ‘æ‰€ç”¨ä¸»é¢˜çš„ä½œè€…ä¹Ÿç”¨è¿™ä¸ªæ–¹å¼éƒ¨ç½²äº†åšå®¢[Mrwill'sblog]ï¼Œè§è´¤æ€é½ï¼Œæ‰€ä»¥æˆ‘æ‰“å¼€ä»–çš„githubâ€œå­¦ä¹ â€äº†ä¸€æ‰‹ğŸ¤ªï¼Œå“ˆå“ˆã€‚

## è¯¦ç»†è¿‡ç¨‹
### Hexoä¸»é¢˜DIY
åœ¨hexoä¸»é¢˜ç½‘ç«™æ‰¾åˆ°äº†è¿™ä¸ªç‚«é…·çš„ä¸»é¢˜[hexo-theme-cupertino]ã€‚
![](/imgs/20240615010.png "hexo-theme-cupertino")
ä¸»é¢˜çš„é…ç½®æŒ‡å—ä¸º[cupertino-configuration]ã€‚æœ€åï¼Œæˆ‘çš„é…ç½®æ–‡ä»¶"_config.cupertino.yml"å†…å®¹å¦‚å›¾ã€‚
![](/imgs/20240615011.png "cupertino-configuration")
![](/imgs/20240615009.png "_config.cupertino.yml")
å°†ç‹¬ç‰¹çš„â€œå½©è™¹æœˆä»½â€æ”¹åˆ°äº†æˆ‘ç”Ÿæ—¥æ‰€åœ¨çš„2æœˆï¼Œå˜¿å˜¿ã€‚


### å‘ç°é—®é¢˜
#### å›¾ç‰‡ç´ æç®¡ç†åŸæ–¹æ¡ˆ
åˆšå¼€å§‹å†™åšå®¢æ—¶ï¼Œæˆ‘çš„å›¾ç‰‡ç´ æç®¡ç†æ–¹æ¡ˆæ˜¯ï¼Œå°†å›¾ç‰‡ä¸Šä¼ åˆ°æŸä¸ªçº¿ä¸Šåº“ï¼Œç„¶åç›´æ¥åœ¨åšæ–‡ä¸­é€šè¿‡é“¾æ¥å¼•ç”¨ã€‚ç”±äºé’±åŒ…ç©ºç©ºï¼Œè€Œä¸”åšå®¢ä¹Ÿæ˜¯é€šè¿‡GitHubéƒ¨ç½²ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº†Githubæ–°å»ºä¸ªrepositoryæ¥æ”¾å›¾ç‰‡ç´ æã€‚
æ–°å»ºçš„repoï¼Œå†™æ–‡æ—¶å·²ç»è¢«æœ‰å¼ºè¿«ç—‡çš„æˆ‘åˆ é™¤äº†å“ˆå“ˆ

![](/imgs/20240615001.png "å›¾ç‰‡ç´ ærepoåˆ é™¤è®°å½•")

#### ä¸€äº›å»ºè®®
>å¯¹GitHubçš„è®¿é—®ï¼Œæ‡‚çš„éƒ½æ‡‚ï¼Œè¦é è¿æ°”ï¼Œè¦æƒ³ç¨³å®šè®¿é—®ï¼Œè¿˜æ˜¯éœ€è¦æ–½å±•ä¸€äº›å°é­”æ³•ã€‚ä¸è¿‡ç”±äºæœ¬èº«åšå®¢å°±æ˜¯ç”¨GitHubæ­çš„ï¼Œæ€ä¹ˆéƒ½å¾—è®¿é—®GitHubï¼Œæ‰€ä»¥ç›´æ¥ç”¨GitHubæ¥æ”¾å›¾ç‰‡ç´ æä¹Ÿè¡Œï¼Œå¦‚æœç”¨å…¶ä»–å¹³å°éƒ¨ç½²ï¼Œç„¶ååˆæœ‰ç±»ä¼¼çš„å›¾ç‰‡ç´ æç®¡ç†éœ€æ±‚çš„è¯ï¼Œå¯ä»¥è€ƒè™‘å…¶ä»–çš„æ–¹å¼ï¼šè­¬å¦‚Giteeï¼Œæˆ–è€…å…¶ä»–ä¸€äº›åå‘å›¾ç‰‡ç®¡ç†çš„äº‘æœåŠ¡ï¼Œè­¬å¦‚ç™¾åº¦äº‘ã€è…¾è®¯äº‘ç­‰ç­‰ã€‚

#### é—®é¢˜ç‚¹
åœ¨æ­¤æ–¹æ¡ˆä¸‹æˆ‘é‡åˆ°çš„é—®é¢˜ï¼š
1. å›¾ç‰‡ç´ ææ²¡å­˜åœ¨hexoé¡¹ç›®æœ¬åœ°æ–‡ä»¶å¤¹ä¸‹ï¼Œå¾—å•ç‹¬ç”¨ä¸€ä¸ªæ–‡ä»¶å¤¹æ”¾ï¼Œä¸æ–¹ä¾¿ä¸€èµ·ç®¡ç†ã€‚
æ³¨ï¼šåˆšå¼€å§‹æ—¶æˆ‘è¯•äº†å°†å›¾ç‰‡ç´ ææ–‡ä»¶å¤¹æ”¾hexoé¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ï¼Œå› ä¸ºæ˜¯ä¸¤ä¸ªrepoï¼Œæ‰€ä»¥ä¸èƒ½æ”¾ä¸€èµ·ï¼Œé™¤éç”¨å­æ¨¡å—ï¼ˆGit Submoduleï¼‰ï¼Œæˆ‘æ²¡æƒ³ç»´æŠ¤é‚£ä¹ˆå¤æ‚å°±ç›´æ¥åˆ†å¼€äº†ã€‚
2. å›¾ç‰‡ç´ ææ˜¯å•ç‹¬å¼€äº†ä¸€ä¸ªrepoï¼Œæ„Ÿè§‰æœ‰ç‚¹æµªè´¹repoçš„èµ„æºï¼Œå› ä¸ºè¯¥repoä¸‹åªæœ‰å›¾ç‰‡ã€‚
3. æ¯æ¬¡å‘æ–‡ï¼Œpushå®Œæ–‡ç« åè¿˜è¦å•ç‹¬pushä¸€æ¬¡å›¾ç‰‡ï¼Œæµªè´¹æ—¶é—´ã€‚
4. å¦‚æœå›¾ç‰‡æ²¡æœ‰åœ¨å†™æ–‡ç« ä¹‹å‰ä¸Šä¼ åˆ°å›¾åº“ï¼Œå†™ä½œæ—¶æ²¡æ³•é¢„è§ˆã€‚

### è§è´¤æ€é½
åœ¨æˆ‘è‹¦æ¼æ€ä¹ˆæ”¹è¿›ä¹‹æ—¶ï¼Œçªç„¶æƒ³èµ·æˆ‘æ‰€ç”¨hexoä¸»é¢˜çš„ä½œè€…ï¼Œä¹Ÿéƒ¨ç½²äº†è¿™ä¸ªåšå®¢ï¼Œæ‰€ä»¥æˆ‘æ‰“å¼€äº†[Mrwill'sblog]ï¼Œç„¶åé¡ºç€æ‰“å¼€äº†ä»–GitHubä¸­éƒ¨ç½²åšå®¢çš„repo[Mrwill's"BlogRepo"]ã€‚
å“‡ï¼Œæ€ä¹ˆå’Œæˆ‘çš„å¤§ä¸ä¸€æ ·ï¼
æˆ‘å‘ç°è¿™ä½å¤§ä½¬å°†hexoé¡¹ç›®æ–‡ä»¶ï¼ˆåŒ…å«å›¾ç‰‡ç´ æï¼‰éƒ½ä¼ åˆ°äº†GitHubï¼Œè€Œä¸”ä»–çš„æ¨é€æ˜¯
é€šè¿‡æœºå™¨äººå®Œæˆçš„ï¼Œç¬é—´è§‰å¾—éå¸¸6å•Šã€‚
#### å¤§ä½¬çš„repo
![](/imgs/20240615002.png "å¤§ä½¬çš„repoæˆªå›¾")
![](/imgs/20240615003.png "å¤§ä½¬çš„repoæˆªå›¾")

åè§‚æˆ‘çš„ï¼Œhexoé¡¹ç›®æ–‡ä»¶ä»åœ¨æœ¬åœ°ï¼Œç”¨çš„æ˜¯hexo-git-deployæ’ä»¶ï¼Œä¼ åˆ°GitHubçš„åªæœ‰ç”Ÿæˆçš„é™æ€ç½‘é¡µæ–‡ä»¶ï¼Œè€Œä¸”å›¾ç‰‡è¿˜è¦å•ç‹¬æ”¾å…¶ä»–åœ°æ–¹ï¼Œè¿™å·®è·å¤ªå¤§äº†ï¼

ç—›å®šæ€ç—›ï¼Œé©¬ä¸Šæ”¹ï¼
#### ä¼˜åŒ–çš„ç‚¹
1. å›¾ç‰‡ç´ æå­˜æ”¾åœ°å€
* å¤‡ä»½äº†å›¾ç‰‡
* åˆ é™¤äº†åŸæ¥å•ç‹¬æ”¾å›¾ç‰‡çš„repo
* åœ¨hexoé¡¹ç›®æ–‡ä»¶å¤¹sourceé‡Œæ–°å»ºäº†å­˜æ”¾å›¾ç‰‡çš„"imgs"æ–‡ä»¶å¤¹
* åšå®¢æ–‡ç« ä¸­å¯¹å›¾ç‰‡çš„å¼•ç”¨é“¾æ¥ä¿®æ”¹
  ![](/imgs/20240615006.png )


2. å°†hexoé¡¹ç›®æ–‡ä»¶ä¸Šä¼ è‡³GitHubï¼Œhexoé¡¹ç›®æ–‡ä»¶å¤¹ä½œå‡ºç›¸åº”ä¿®æ”¹
* å–æ¶ˆä½¿ç”¨hexoçš„deployæ’ä»¶ï¼Œåˆ é™¤hexoé¡¹ç›®æ–‡ä»¶ä¸­çš„.deployæ–‡ä»¶å¤¹ã€‚
  æœ¬æ¥æƒ³å±•ç¤ºrepoåœ¨æ­¤ä¹‹å‰çš„å†å²æäº¤çš„ï¼Œä¸è¿‡æˆ‘å‘ç°æˆ‘ç”¨çš„æ˜¯å¼ºåˆ¶æäº¤ï¼ˆå› ä¸ºæ–‡ä»¶ç»å¤§éƒ¨åˆ†éƒ½ä¸ä¸€æ ·æ‰€ä»¥ç”¨äº†å¼ºåˆ¶æäº¤ï¼‰ï¼Œæ‰€ä»¥æŠŠä¹‹å‰çš„æäº¤å†å²é¡¶æ‰äº†ã€‚è¿™é‡Œå…¶å®æ“ä½œå¤±è¯¯äº†ï¼Œåº”è¯¥æäº¤ä¸ºå¦ä¸€ä¸ªåˆ†æ”¯ï¼Œæˆ–è€…åˆ é™¤çš„æ—¶å€™ä¸åˆ .gitï¼Œæ¨é€ä¸Šå»å°±å¥½äº†ï¼Œå®³ï¼Œä»¥åæ³¨æ„ï¼ã€‚è¿™é‡Œå°±å±•ç¤ºä¸‹æˆ‘å›æ”¶ç«™é‡Œçš„.delpoyæ–‡ä»¶å¤¹å§å“ˆå“ˆå“ˆã€‚
  ![](/imgs/20240615004.png "èººåœ¨å›æ”¶ç«™é‡Œçš„.deploy")

* äº†è§£GitHubPagesçš„ä½œç”¨åŸç†[GithubPagesDocs]
  ä¹‹å‰ç”¨hexo-git-deployæ’ä»¶ï¼Œå®ƒæ˜¯ç”Ÿæˆ.deployæ–‡ä»¶å¤¹ï¼ŒæŠŠpublicæ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹copyåˆ°äº†.deployä¸‹ï¼Œç„¶åä¼ åˆ°äº†GitHubã€‚GitHubPagesçš„åŸç†æ˜¯æ‰¾åˆ°åä¸ºâ€œç”¨æˆ·å.github.ioâ€çš„repoä¸‹çš„æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œé»˜è®¤ä¸º/rootï¼Œå¯è®¾ç½®/docsã€‚

* è¿™é‡Œæˆ‘éµå¾ªäº†[Mrwill's"BlogRepo"]çš„è®¾è®¡ï¼Œä½¿ç”¨/docsã€‚
  ![](/imgs/20240615005.png "GitHubPagesè®¾ç½®è¯¦æƒ…")
  
3. ä½¿ç”¨Github Actionsé…ç½®pushåè‡ªåŠ¨éƒ¨ç½²
  ä½¿ç”¨hexo gç”Ÿæˆæ–°çš„é™æ€ç½‘é¡µé¡µé¢æ—¶ï¼Œä¼šå°†ç”Ÿæˆçš„æ–‡ä»¶æ”¾åˆ°publicæ–‡ä»¶å¤¹ä¸‹ï¼Œè€Œ2ä¸­GitHubPagesé…ç½®çš„æ˜¯æ‰¾/docsï¼Œæ‰€ä»¥è¿™é‡Œè¿˜éœ€è¦å¤„ç†ï¼Œä¸ç„¶æ¯æ¬¡pushè¦è‡ªå·±æ‰‹åŠ¨æ–°å»ºdocsæ–‡ä»¶å¤¹å¹¶å¤åˆ¶å†…å®¹è¿›å»ã€‚æ­£å¥½å°†è¿™ä¸ªåŠ¨ä½œå†™åˆ°GitHub Actionsä¸­ã€‚

* åœ¨hexoé¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ–°å»º.github/workflows/blog-builder.ymlï¼Œé…ç½®å†…å®¹å¦‚å›¾æ‰€ç¤ºï¼š
* å¯åŠ¨Ubuntu->
* æ‹‰å–æ›´æ–°->
* å®‰è£…ä¾èµ–->
* æ–°å»ºdocsï¼Œå¤åˆ¶publicä¸­çš„å†…å®¹åˆ°docsï¼ˆæœ¬åœ°.gitignoreæ·»åŠ äº†"/public"ï¼‰->
* pushæ›´æ–°åˆ°è¿œç¨‹ä»“åº“
![](/imgs/20240615007.png "blog-builder.yml")
![](/imgs/20240615008.png "blog-builder.yml")

æ³¨ï¼šåœ¨GitHub Actionsä¸­é…ç½®gitæ‰§è¡Œè¯­å¥ï¼Œä¼šæœ‰ä¸ªé—®é¢˜ï¼šä¼šè§¦å‘ä¸¤æ¬¡acitonã€‚
å› ä¸ºåŠ¨ä½œçš„è§¦å‘æ¡ä»¶è®¾ç½®ä¸ºpushï¼Œé…ç½®æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸¤æ¬¡pushï¼Œä¸€æ¬¡æ˜¯æ‰‹å·¥pushçš„æ—¶å€™ï¼Œä¸€æ¬¡æ˜¯è§¦å‘åæ‰§è¡Œçš„â€œgit pushâ€è¯­å¥ã€‚è¿™å¯¼è‡´æ¯æ¬¡æˆ‘pushéƒ½ä¼šæœ‰ä¸¤æ¬¡actionè§¦å‘ï¼Œç„¶åæœ‰ä¸€ä¸ªè¢«å¼ºè¡Œæš‚åœï¼Œç„¶åæˆ‘å°±ä¼šæ”¶åˆ°æé†’é‚®ä»¶ã€‚æˆ‘çœ‹äº†å¤§ä½¬ä¹Ÿæ˜¯ä¸€æ ·çš„æœ‰æŠ¥é”™ã€‚
å®˜æ–¹è¯´ä¸æ¨èåœ¨é…ç½®æ–‡ä»¶é‡Œå†™gitè¯­å¥ï¼Œè€Œæ˜¯æ¨èäº†å†…ç½®çš„â€œdeployâ€æŒ‡ä»¤.
![](/imgs/20240615013.png "blog-builder.yml")

è¿™é‡Œå› ä¸ºæˆ‘è¦ä»publicå¤åˆ¶å†…å®¹åˆ°docsï¼Œè¦pushï¼Œæ‰€ä»¥æ²¡å†å°è¯•ä½¿ç”¨å®˜æ–¹çš„æŒ‡ä»¤äº†ï¼Œè€Œæ˜¯é€‰æ‹©å…³æ‰äº†æŠ¥é”™æé†’å“ˆå“ˆå“ˆã€‚
![](/imgs/20240615012.png )
åç»­å¯ä»¥å†çœ‹ä¸‹å¦‚ä½•ä¼˜åŒ–ï¼Œçœå¾—æ¯æ¬¡pushï¼ŒGithub Actionéƒ½è¦æŠ¥é”™ã€‚




[æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡]:https://keplerxxiib.github.io/2024/05/05/myfirstblog
[hexo-theme-cupertino]:https://github.com/MrWillCom/hexo-theme-cupertino
[Mrwill'sblog]:https://blog.mrwillcom.com
[Mrwill's"BlogRepo"]:https://github.com/MrWillCom/MrWillCom.github.io
[GithubPagesDocs]:https://docs.github.com/zh/pages
[cupertino-configuration]:https://cupertino.mrwillcom.com/configuration/navigation